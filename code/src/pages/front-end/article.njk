{% extends "layouts/front-end/base.njk" %}

{% extends "layouts/front-end/base.njk" %}

{% block main %}
  <article class="max-w-3xl mx-auto my-8">
    <div class="bg-white rounded-2xl shadow-md overflow-hidden">

      {# Image de l'article #}
      <img
        class="w-full h-[300px] object-cover"
        src="{{ '/images/image-placeholder-article.png'
                if (not article.image or article.image|length == 0)
                else '/uploads/' ~ article.image }}"
        alt="{{ article.title }}"
      >

      <div class="p-6 flex flex-col gap-4">
        {# Titre #}
        <h1 class="text-3xl font-bold">
          {{ article.title }}
        </h1>

        {# Auteur #}
        <p class="italic text-gray-600 text-sm">
          {% if article.author %}
            Par
            <a href="/auteurs/{{ article.author._id }}" class="text-blue-700 hover:underline">
              {{ article.author.firstname }} {{ article.author.lastname }}
            </a>
          {% else %}
            La rÃ©daction
          {% endif %}
        </p>

        {# ðŸŸ¢ CHAPO (abstract) â€” texte court #}
        {% if article.abstract %}
          <p class="text-lg font-medium text-gray-800">
            {{ article.abstract }}
          </p>
        {% endif %}

        {# ðŸ”¹ VidÃ©o YouTube (si prÃ©sente) #}
        {% if article.yt_video_id %}
          <section class="mt-4 aspect-video">
            <iframe
              class="w-full h-full rounded-lg"
              src="https://www.youtube.com/embed/{{ article.yt_video_id }}"
              title="VidÃ©o associÃ©e Ã  l'article"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen
              referrerpolicy="strict-origin"
            ></iframe>
          </section>
        {% endif %}

        {# ðŸŸ£ CONTENU COMPLET #}
        <div class="prose max-w-none mt-4">
          {{ article.content | safe }}
        </div>
      </div>
    </div>
  </article>
{% endblock %}

